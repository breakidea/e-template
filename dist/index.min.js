!function(a,b){function c(a,c,d){b===d&&(d=!0);for(var e in c||{})!c.hasOwnProperty(e)||!d&&a.hasOwnProperty(e)||(a[e]=c[e]);return a}function d(a,e){if(a&&"object"==typeof a&&b===e)for(var f in a)d(f,a[f]);else switch(a){case"clean":case"strip":case"filter":case"output":p[a]=e;break;case"filters":c(q,e);break;default:throw"[Error] does not support var `"+a+"`."}}function e(){var a,b,c,d={};for(a=0;a<arguments.length;a++){b=arguments[a]||{};for(c in b)d[c]=b[c]}return d}function f(a,b){var c,d,f=0,h="";for(b=e(p,b),a=b.strip?a.replace(n,""):a,a=b.clean?a.replace(l,""):a,d=function(a,c){a?(c=c.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(m,b.clean?"":"\\n"),c&&(h+=b.output+' += "'+c+'";')):c.match(k)?h+=c:(c=g(c,"_.",b.filter))&&(h+=b.output+" += "+c+";")};c=j.exec(a);)d(1,a.slice(f,c.index)),d(0,c[1]),f=c.index+c[0].length;return d(1,a.substr(f,a.length-f)),h}function g(a,b,c){var d,e,f,g=/(=|:|-)?([^|]*)\|?([^:]*)([\w\W]*)/,h=g.exec(a);return h&&h[2]?(d="("+h[2]+")",(e=h[3])&&(d="("+h[2]+h[4].replace(/:/g,", ")+")"),e=e?"("+b+e+d+")":d,f={"=":"raw","-":"escapeJs",":":"encodeURIComponent"}[h[1]]||c,b+f+e):!1}function h(a,b){var d,g,h,i,j,k;if((d=o.test(a))&&(d=new Function("return "+RegExp[1])(),a=a.replace(RegExp[0],"")),b=e(p,d,b),g="var "+b.output+' = ""; data = (data && typeof data == "object") ? data : {};',h=f(a,b),i="return "+b.output+";",b.apply)for(j=0;j<b.apply.length;j++)g+="var "+b.apply[j]+' = data["'+b.apply[j]+'"];';else h="with(data){"+h+"}";return k=new Function(["data","_"],g+h+i),c(k,{render:function(a,b){return b=e(q,b),k.call(null,a,b)}}),k}var i={version:"1.0.2"},j=/<%(.*?)%>\r?\n*/g,k=/(^\s*(var|void|if|for|else|switch|case|break|{|}|;))(.*)?/g,l=/\s*\r?\n\s*/g,m=/\r?\n/g,n=/<!--(?:[\s\S]*?)-->/g,o=/<!--\s*config\s*:\s*(\{.*?\})\s*-->/m,p={clean:!1,output:"_out",strip:!0,filter:"encode",errorHandle:!1},q={escape:function(a,b){return"html"==b?this.encode(a):"url"==b?this.encodeURIComponent(a):"js"==b?this.escapeJs(a):a},escapeJs:function(a){return a=this.init(a).replace(/\\/g,"\\\\").replace(/\r?\n/g,"\\n").replace(/'/g,"\\'").replace(/"/g,'\\"')},trim:function(a){return this.init(a).replace(/^\s*|\s*$/g,"")},init:function(a){return("undefined"==typeof a||null===a)&&(a=""),""+a},cat:function(){var a=[].slice.call(arguments);return a.join("")},encodeURIComponent:function(a){return a=this.init(a),encodeURIComponent?encodeURIComponent(a):escape(a)},encode:function(a){return a=this.init(a).replace(/&/g,"&amp;").replace(/\x3C/g,"&lt;").replace(/\x3E/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")},raw:function(a){return a},truncate:function(a,b,c){var d,e=0,f="",g=/[^\x00-\xFF]/g,h="",i=this.init(a).replace(g,"**").length;for(d=0;i>d&&(h=a.charAt(d).toString(),e+=h.match(g)?2:1,!(e>b));d++)f+=h;return c&&i>b&&(f+=c),f}};i.config=d,i.compile=h,i.__filters=q,i.__convert=f,i.__filterVars=g,i.render=function(a,b){return h(a).render(b)},"function"==typeof require&&"object"==typeof module&&"object"==typeof module.exports?module.exports=i:"function"==typeof define&&define.amd?define(function(){return i}):a.xTemplator=a.xTemplator||i}(this);